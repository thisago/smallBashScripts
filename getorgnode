#!/bin/bash

if [ -z "$1" ]; then
  echo "Usage: $0 ORG_ID"
  exit 1
fi

org_id="$1"

elisp="
(let ((node (org-roam-node-from-id \"$org_id\")))
  (if node
      (with-current-buffer (find-file-noselect (org-roam-node-file node))
        (save-excursion
          (goto-char (org-roam-node-point node))
          (let ((start (line-number-at-pos (point))))
            (org-end-of-subtree t t)
            (let ((end (line-number-at-pos (point))))
              (princ (format \"%s\n%d\n%d\"
                             (expand-file-name (org-roam-node-file node))
                             start
                             end))))))
    (princ \"ID not found\")))
"

emacsclient --eval "$elisp" | sed -e 's/^"//' -e 's/"$//'
